var map,marker;function initMap(){var t={lat:-24.719942,lng:46.725066};cart_data_vue.lat=t.lat,cart_data_vue.lng=t.lng,map=new google.maps.Map(document.getElementById("map"),{center:t,mapTypeControl:!1,streetViewControl:!1,zoom:15}),infoWindow=new google.maps.InfoWindow;const a=document.createElement("button");a.textContent="موقعي",a.classList.add("custom-map-control-button"),map.controls[google.maps.ControlPosition.TOP_CENTER].push(a),a.addEventListener("click",()=>{get_current_location()}),marker=new google.maps.Marker({position:t,map:map,draggable:!0,animation:google.maps.Animation.DROP});var n=new google.maps.Geocoder,l=new google.maps.InfoWindow;get_current_location(),google.maps.event.addListener(map,"click",function(t){marker.setPosition(t.latLng),cart_data_vue.lat=t.latLng.lat(),cart_data_vue.lng=t.latLng.lng(),$("#lat").val(t.latLng.lat()),$("#lng").val(t.latLng.lng()),geocodeLatLng(n,map,marker,l,cart_data_vue.lat,cart_data_vue.lng)}),google.maps.event.addListener(marker,"dragend",function(t){cart_data_vue.lat=t.latLng.lat(),cart_data_vue.lng=t.latLng.lng(),$("#lat").val(t.latLng.lat()),$("#lng").val(t.latLng.lng()),geocodeLatLng(n,map,marker,l,cart_data_vue.lat,cart_data_vue.lng)});document.getElementById("pac-input");var r=new google.maps.places.SearchBox(document.getElementById("pac-input"));map.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("pac-input")),google.maps.event.addListener(r,"places_changed",function(){for(var t,a=r.getPlaces(),e=new google.maps.LatLngBounds,o=0;t=a[o];o++)t=t,marker.setPosition(t.geometry.location),cart_data_vue.lat=t.geometry.location.lat(),cart_data_vue.lng=t.geometry.location.lng(),$("#lat").val(t.geometry.location.lat()),$("#lng").val(t.geometry.location.lng()),marker.bindTo("map",r,"map"),geocodeLatLng(n,map,marker,l,cart_data_vue.lat,cart_data_vue.lng),google.maps.event.addListener(marker,"map_changed",function(){this.getMap()||this.unbindAll()}),e.extend(t.geometry.location);map.fitBounds(e),r.set("map",map),map.setZoom(Math.min(map.getZoom(),12))})}function get_current_location(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};cart_data_vue.lat=t.coords.latitude,cart_data_vue.lng=t.coords.longitude,map.setCenter(a),marker.setPosition(a)},function(){})}function geocodeLatLng(t,e,o,n,a,l){n.close();l={lat:parseFloat(a),lng:parseFloat(l)};t.geocode({location:l},function(t,a){"OK"===a&&t[0]&&(n.setContent(t[0].formatted_address),n.open(e,o))})}function handleLocationError(t,a,e){a.setPosition(e),a.setContent(t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),a.open(map)}